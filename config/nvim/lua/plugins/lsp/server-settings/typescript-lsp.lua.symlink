-- vi: ft=lua

local M = {}

function M.setup()
  local typescript_status_ok, typescript = pcall(require, "typescript")
  if not typescript_status_ok then
    return
  end

  typescript.setup({
    debug = false, -- enable debug logging for commands
    server = {
      cmd = { vim.fn.stdpath("data") .. "/mason/bin/typescript-language-server", "--stdio" },
      on_attach = require("plugins.lsp.on_attach"),
      settings = {
        javascript = {
          inlayHints = {
            includeInlayEnumMemberValueHints = true,
            includeInlayFunctionLikeReturnTypeHints = true,
            includeInlayFunctionParameterTypeHints = true,
            includeInlayParameterNameHintsWhenArgumentMatchesName = true,
            includeInlayPropertyDeclarationTypeHints = true,
            includeInlayVariableTypeHints = true,
            includeInlayParameterNameHints = "all",
          },
        },
        typescript = {
          inlayHints = {
            includeInlayEnumMemberValueHints = true,
            includeInlayFunctionLikeReturnTypeHints = true,
            includeInlayFunctionParameterTypeHints = true,
            includeInlayParameterNameHintsWhenArgumentMatchesName = true,
            includeInlayPropertyDeclarationTypeHints = true,
            includeInlayVariableTypeHints = true,
            includeInlayParameterNameHints = "all",
          },
        },
      },
    },
  })
end

return M
